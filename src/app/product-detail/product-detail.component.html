<div class="details-container" *ngIf="product">

  <div class="image-section">
    <img 
      [src]="'http://localhost:8081/api/v1/public/products/image/' + product.image"
      alt="{{ product.productName }}">
  </div>
  

  <div class="info-section">

    <h2>{{ product.productName }}</h2>

    <p class="description">
      {{ product.description }}
    </p>

    <p class="category">
      Category: {{ product.category?.name || 'N/A' }}
    </p>

    <div class="price">

      ₹{{ product.special_price || product.price }}

      <span *ngIf="product.special_price" class="old-price">
        ₹{{ product.price }}
      </span>

      <span *ngIf="product.discount > 0" class="discount">
        {{ product.discount }}% OFF
      </span>

    </div>
    
    <button class="add-cart" (click)="handleAddToCart()">
      Add to Cart
    </button>
    <div *ngIf="addToCartMessage"
     class="alert"
     [ngClass]="addToCartMessage.includes('already') ? 'alert-danger' : 'alert-success'">
  {{ addToCartMessage }}
</div>

  </div>
  

</div>
<div *ngIf="showLoginModal" class="popup-backdrop">

  <div class="popup-box">

    <h3>Please Login First</h3>
    <p>You need to login to add items to cart.</p>

    <button (click)="router.navigate(['/login'])">
      Login
    </button>

    <button (click)="router.navigate(['/register'])">
      Register
    </button>

    <button (click)="showLoginModal = false">
      Close
    </button>

  </div>

</div>

<div *ngIf="!product">
  Loading...
</div>
